<?xml version="1.0" ?>

<Equations>

	<Space_Slots_Full>
		(Variable_Target.StarbaseLevel == Variable_Target.MaxStarbaseLevel)
		*
		(
			(Function_Shipyard_Level.Evaluate > 0)
			+
			Variable_Self.StructureCount {Parameter_Type = "CSA_Ship_Market", Parameter_Only_Consider_Complete = 1.0}
		)
		*
		Variable_Target.HasStructure {Parameter_Type = "Generic_Tradestation",
											Parameter_Type = "Generic_Colony_One",
											Parameter_Type = "Generic_Colony_Two",
											Parameter_Only_Consider_Complete = 1.0}
		*
		(
			((
				(3 > Variable_Target.MaxStarbaseLevelUnnormalized)
				+
				Variable_Target.HasStructure {Parameter_Type = "Secondary_Haven",
													Parameter_Type = "Secondary_TF_Outpost",
													Parameter_Type = "Secondary_Golan_One",
													Parameter_Type = "Secondary_Golan_Two",
													Parameter_Type = "Secondary_Golan_Three",
													Parameter_Type = "Valor_Station",
													Parameter_Type = "Brask",
													Parameter_Type = "Visvia",
													Parameter_Type = "Meridian_I",
													Parameter_Type = "Meridian_II",
													Parameter_Type = "Meridian_III",
													Parameter_Type = "Meridian_IV",
													Parameter_Type = "Aphelion",
													Parameter_Only_Consider_Complete = 1.0
													}
			) > 0)
		)
	</Space_Slots_Full>

	<Needs_Groundbase_Upgrade>
		(Variable_Target.GroundbaseLevel > 0.0)
		*
		(Function_Open_Ground_Structure_Slots.Evaluate > 0)
		*
		(
			4.0 * (Variable_Target.Hints.Chokepoint)
			+
			2.0 * Function_GenericPlanetValue.Evaluate
			+
			1.0 * (Variable_Target.MaxGroundbaseLevel - Variable_Target.GroundbaseLevel)
			+
			4.0 * Function_Is_Connected_To_Enemy.Evaluate
		)
		/
		7.0
	</Needs_Groundbase_Upgrade>
	
	
	<!-- Returns 0 to turn off production if slots need to be saved for a company. Returns 1 otherwise -->
	<Needs_Build_Slots_Saved_For_Company>
		((Function_Open_Ground_Structure_Slots.Evaluate - Function_Is_Company_Planet.Evaluate) > 0)
		*
		(1 - Function_Planet_Has_Company.Evaluate)
		+
		Function_Planet_Has_Company.Evaluate
	</Needs_Build_Slots_Saved_For_Company>


	<Needs_Starbase_Upgrade>
		(Variable_Target.MaxStarbaseLevel > Variable_Target.StarbaseLevel)
		*
		(Variable_Target.EnemyForce.HasSpaceForce == 0)
		*
		(
			1.25 * (Variable_Target.MaxStarbaseLevelUnnormalized - Variable_Target.StarbaseLevelUnnormalized) / clamp(Variable_Target.MaxStarbaseLevelUnnormalized, 1, 5)
			+
			0.25 * (Variable_Target.MaxStarbaseLevelUnnormalized - Variable_Target.StarbaseLevelUnnormalized)
			+
			2.0 * Function_Is_Connected_to_Enemy.Evaluate
			+
			Function_GenericPlanetValue.Evaluate
			+
			Variable_Target.Hints.Chokepoint 
			+ 
			2.0 * Function_Planet_Has_Capital_Building.Evaluate 
			+ 
			Function_Is_Company_Planet.Evaluate
			+
			50 * (Variable_Target.StarbaseLevel == 0)
		)
	</Needs_Starbase_Upgrade>

	
	<Needs_Shipyard>
		5.0
		*
		(Function_Shipyard_Level.Evaluate == 0)
		*
		Variable_Target.StarbaseLevelUnnormalized
		*
		(Variable_Target.EnemyForce.HasSpaceForce == 0)
		*
		(
			Function_Max_Shipyard_Level.Evaluate
			+
			Function_GenericPlanetValue.Evaluate
			+ 
			2.0 * Function_Planet_Has_Capital_Building.Evaluate 
			+ 
			Function_Is_Company_Planet.Evaluate
			+
			Function_Needs_Better_Buying_Capability_Space.Evaluate
		)
	</Needs_Shipyard>
	
	
	<Needs_Better_Buying_Capability_Space>
		6 * ((0.5 - (Function_Level_Two_Shipyards.Evaluate / clamp(Variable_Self.PlanetsControlledUnnormalized, 1, 500))) > 0) *
		(Function_Shipyard_Level.Evaluate == 2.0)
		+
		5 * ((0.2 - (Function_Level_Three_Shipyards.Evaluate / clamp(Variable_Self.PlanetsControlledUnnormalized, 1, 500))) > 0) *
		(Function_Shipyard_Level.Evaluate == 3.0)
	</Needs_Better_Buying_Capability_Space>


	<Need_Light_Vehicle_Factory>
		(
			1 + 50 * (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Light_Vehicle_Factory",
													Parameter_Type = "A_Ground_Light_Vehicle_Factory",
													Parameter_Type = "T_Ground_Light_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Light_Vehicle_Factory",
													Parameter_Type = "R_Ground_Light_Vehicle_Factory",
													Parameter_Type = "C_Ground_Light_Vehicle_Factory",
													Parameter_Type = "P_Ground_Light_Vehicle_Factory",
													Parameter_Type = "U_Ground_Vehicle_Factory",
													Parameter_Type = "HC_Ground_Light_Vehicle_Factory",
													Parameter_Type = "M_Ground_Light_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0} == 0)
		)
		*
		25 * clamp(0.3 - (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Light_Vehicle_Factory",
													Parameter_Type = "A_Ground_Light_Vehicle_Factory",
													Parameter_Type = "T_Ground_Light_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Light_Vehicle_Factory",
													Parameter_Type = "R_Ground_Light_Vehicle_Factory",
													Parameter_Type = "C_Ground_Light_Vehicle_Factory",
													Parameter_Type = "P_Ground_Light_Vehicle_Factory",
													Parameter_Type = "U_Ground_Vehicle_Factory",
													Parameter_Type = "HC_Ground_Light_Vehicle_Factory",
													Parameter_Type = "M_Ground_Light_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0} /
													clamp(Variable_Self.PlanetsControlledUnnormalized, 1, 500)), 0.01, 0.3)
		*
		Function_Needs_Groundbase_Upgrade.Evaluate
		*
		(2 > Variable_Target.StructureCount {Parameter_Type = "E_Ground_Light_Vehicle_Factory",
													Parameter_Type = "R_Ground_Light_Vehicle_Factory",
													Parameter_Type = "A_Ground_Light_Vehicle_Factory",
													Parameter_Type = "T_Ground_Light_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Light_Vehicle_Factory",
													Parameter_Type = "C_Ground_Light_Vehicle_Factory",
													Parameter_Type = "P_Ground_Light_Vehicle_Factory",
													Parameter_Type = "U_Ground_Vehicle_Factory",
													Parameter_Type = "HC_Ground_Light_Vehicle_Factory",
													Parameter_Type = "M_Ground_Light_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0})
		*
		(Function_Should_Save_For_Desirable_Structures.Evaluate == 0)
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
	</Need_Light_Vehicle_Factory>

	
	<Need_Barracks>
		(
			1 + 50 * (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Barracks",
													Parameter_Type = "A_Ground_Barracks",
													Parameter_Type = "T_Ground_Barracks",
													Parameter_Type = "Z_Ground_Barracks",
													Parameter_Type = "R_Ground_Barracks",
													Parameter_Type = "P_Ground_Barracks",
													Parameter_Type = "C_Ground_Barracks",
													Parameter_Type = "U_Ground_Barracks",
													Parameter_Type = "HC_Ground_Barracks",
													Parameter_Type = "M_Ground_Barracks",
													Parameter_Only_Consider_Complete = 1.0} == 0)
		)
		*
		25 * clamp(0.3 - (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Barracks",
														Parameter_Type = "A_Ground_Barracks",
														Parameter_Type = "T_Ground_Barracks",
														Parameter_Type = "Z_Ground_Barracks",
														Parameter_Type = "R_Ground_Barracks",
														Parameter_Type = "P_Ground_Barracks",
														Parameter_Type = "C_Ground_Barracks",
														Parameter_Type = "U_Ground_Barracks",
														Parameter_Type = "HC_Ground_Barracks",
														Parameter_Type = "M_Ground_Barracks",
														Parameter_Only_Consider_Complete = 1.0} /
														clamp(Variable_Self.PlanetsControlledUnnormalized, 1, 500)), 0.01, 0.3)
		*
		Function_Needs_Groundbase_Upgrade.Evaluate
		*
		(2 > Variable_Target.StructureCount {Parameter_Type = "E_Ground_Barracks",
													Parameter_Type = "A_Ground_Barracks",
													Parameter_Type = "T_Ground_Barracks",
													Parameter_Type = "Z_Ground_Barracks",
													Parameter_Type = "R_Ground_Barracks",
													Parameter_Type = "P_Ground_Barracks",
													Parameter_Type = "C_Ground_Barracks",
													Parameter_Type = "U_Ground_Barracks",
													Parameter_Type = "HC_Ground_Barracks",
													Parameter_Type = "M_Ground_Barracks",
													Parameter_Only_Consider_Complete = 1.0})
		*
		(Function_Should_Save_For_Desirable_Structures.Evaluate == 0)
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
	</Need_Barracks>


	<Need_Heavy_Vehicle_Factory>
		(
			1 + 50 * (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "A_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "T_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "R_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "P_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "C_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "U_Ground_Droid_Works",
													Parameter_Type = "HC_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "M_Ground_Heavy_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0} == 0)
		)
		*
		Function_Needs_Groundbase_Upgrade.Evaluate
		*
		(
			25 * clamp(0.25 - (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "A_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "T_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "Z_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "R_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "P_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "C_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "U_Ground_Droid_Works",
														Parameter_Type = "HC_Ground_Heavy_Vehicle_Factory",
														Parameter_Type = "M_Ground_Heavy_Vehicle_Factory",
														Parameter_Only_Consider_Complete = 1.0} /
														clamp(Variable_Self.PlanetsControlledUnnormalized, 1, 500)), 0.01, 0.25)
			+
			(5.0 * Variable_Target.StructureCount {Parameter_Type = "E_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "A_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "T_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "R_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "P_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "C_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "U_Ground_Droid_Works",
													Parameter_Type = "HC_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "M_Ground_Heavy_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0})
		)
		*
		(2 > Variable_Target.StructureCount {Parameter_Type = "E_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "A_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "T_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "R_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "P_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "C_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "U_Ground_Droid_Works",
													Parameter_Type = "HC_Ground_Heavy_Vehicle_Factory",
													Parameter_Type = "M_Ground_Heavy_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0})
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
	</Need_Heavy_Vehicle_Factory>


	<Need_Advanced_Vehicle_Factory>
		Variable_Self.IsFaction {Parameter_Faction = "Empire", 
								Parameter_Faction = "Eriadu_Authority", 
								Parameter_Faction = "Pentastar", 
								Parameter_Faction = "Zsinj_Empire", 
								Parameter_Faction = "Greater_Maldrood"}
		*
		(
			1 + 50 * (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "A_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "T_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "P_Ground_Advanced_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0} == 0)
		)
		*
		Function_Needs_Groundbase_Upgrade.Evaluate
		*
		(
			25 * clamp(0.2 - (Variable_Self.StructureCount {Parameter_Type = "E_Ground_Advanced_Vehicle_Factory",
															Parameter_Type = "A_Ground_Advanced_Vehicle_Factory",
															Parameter_Type = "T_Ground_Advanced_Vehicle_Factory",
															Parameter_Type = "Z_Ground_Advanced_Vehicle_Factory",
															Parameter_Type = "P_Ground_Advanced_Vehicle_Factory",
														Parameter_Only_Consider_Complete = 1.0} /
														clamp(Variable_Self.PlanetsControlledUnnormalized, 1, 500)), 0.01, 0.2)
			+
			(5.0 * Variable_Target.StructureCount {Parameter_Type = "E_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "A_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "T_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "Z_Ground_Advanced_Vehicle_Factory",
													Parameter_Type = "P_Ground_Advanced_Vehicle_Factory",
													Parameter_Only_Consider_Complete = 1.0})
		)
		*
		(2 > Variable_Target.StructureCount {Parameter_Type = "E_Ground_Advanced_Vehicle_Factory",
											Parameter_Type = "A_Ground_Advanced_Vehicle_Factory",
											Parameter_Type = "T_Ground_Advanced_Vehicle_Factory",
											Parameter_Type = "Z_Ground_Advanced_Vehicle_Factory",
											Parameter_Type = "P_Ground_Advanced_Vehicle_Factory",
											Parameter_Only_Consider_Complete = 1.0})
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
	</Need_Advanced_Vehicle_Factory>
	
	
	<Needs_Initial_Groundbase>
		50.0
		*
		((Variable_Target.MaxGroundbaseLevelUnnormalized - Variable_Target.GroundBaseLevelUnnormalized) > 1)
		*
		(1.0 - Function_Planet_Has_Local_Government_Building.Evaluate)
	</Needs_Initial_Groundbase>


	<Needs_Tax_Agency>
		(
			30.0 * Variable_Target.BaseIncome
			*
			clamp(Function_Defense_Level.Evaluate - 1, 0.5, 2.0)
			+
			2.0 * Function_Economic_Personality.Evaluate
		)
		*
		(0.4 + 0.6 * (Function_Is_Connected_To_Enemy.Evaluate == 0))
		*
		(1 > Variable_Target.StructureCount {Parameter_Type = "Tax_Agency", Parameter_Only_Consider_Complete = 1.0})
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		(Function_Planet_Influence_Value.Evaluate > 5)
		*
		(Function_Open_Ground_Structure_Slots.Evaluate > 1)
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
		*
		(Variable_Target.BaseIncome > 0.0)
	</Needs_Tax_Agency>

	
	<Needs_Mining_Facility>
		50.0
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
		*
		(1 > Variable_Target.StructureCount {Parameter_Type = "Mining_Facility", Parameter_Only_Consider_Complete = 1.0})
	</Needs_Mining_Facility>

	
	<Needs_Tradestation>
		(
			clamp(Function_Defense_Level.Evaluate - 1, 0.1, 2.0)
			+
			5.0
			*
			(Variable_Self.HasStructure {Parameter_Type = "Generic_Tradestation", Parameter_Only_Consider_Complete = 1.0} == 0.0)
			+
			5.0 * Function_Economic_Personality.Evaluate
			+
			(5 > Function_Planet_Influence_Value.Evaluate)
			+
			5.0 * Function_Resource_Trade_Hub.Evaluate
		)
		*
		(0.1 + 0.9 * (Function_Is_Connected_To_Enemy.Evaluate == 0))
		*
		(15 > Variable_Self.StructureCount {Parameter_Type = "Generic_Tradestation", Parameter_Only_Consider_Complete = 1.0})
		*
		(1 > Variable_Target.StructureCount {Parameter_Type = "Generic_Tradestation", Parameter_Only_Consider_Complete = 1.0})
		*
		Variable_Target.ActiveTradeRoutes
	</Needs_Tradestation>

	
	<Should_Save_For_Desirable_Structures>
		(Variable_Target.GroundBaseLevelUnnormalized > 1.0)
		*
		(
			(Function_Needs_Tax_Agency.Evaluate > 5.0)
			+
			(Function_Need_Heavy_Vehicle_Factory.Evaluate > 20.0)
			+
			(Function_Need_Advanced_Vehicle_Factory.Evaluate > 20.0)
			+
			(Function_Needs_Weapon.Evaluate > 4.0)
			+
			(Function_Needs_Turbolasers.Evaluate > 4.0)
		)
	</Should_Save_For_Desirable_Structures>
	
	
	<Ground_Base_Level>
		Variable_Target.GroundBaseLevelUnnormalized
	</Ground_Base_Level>
	
	
	<Has_Starbase>
		Variable_Target.StarbaseLevel > 0
	</Has_Starbase>

	
	<Need_Ground_Company>
		(Variable_Target.StarbaseLevelUnnormalized > 0)
		*
		clamp(Function_Defense_Level.Evaluate, 1.0, 2.0)
		*
		Function_Is_Company_Planet.Evaluate
		*
		(1 - Function_Planet_Has_Company.Evaluate)
		*
		(1 - Function_Has_Upgradeable_Hero.Evaluate)
	</Need_Ground_Company>
	
	
	<Need_Space_Company>
		(Variable_Target.StarbaseLevelUnnormalized > 1)
		*
		Function_Is_Company_Planet.Evaluate
		*
		(
		1 - (
			Function_Planet_Has_Slayn_Korpil.Evaluate
			+
			Function_Planet_Has_Rancor_Base.Evaluate
			)
		)
		*
		(1 - Function_Has_Upgradeable_Hero.Evaluate)
	</Need_Space_Company>
	
	
	<Need_Capital_Building>
		10
		*
		(Variable_Target.StarbaseLevelUnnormalized > 0)
		*
		clamp(Function_Defense_Level.Evaluate, 0.0, 2.0)
		*
		(1 - Function_Player_Has_Capital_Building.Evaluate)
		*
		Function_Needs_Groundbase_Upgrade.Evaluate
		*
		(1.1 - clamp(Function_Is_Connected_To_Enemy.Evaluate, 0.0, 1.0))
	</Need_Capital_Building>
	
	
	<Needs_Ground_Defenses>
		(Function_Open_Ground_Structure_Slots.Evaluate > 0)
		*
		(
			Function_Is_Connected_To_Enemy.Evaluate
			+
			4.0 * (Variable_Target.Hints.Chokepoint + Variable_Target.Hints.PriorityTarget)
			+
			Function_GenericPlanetValue.Evaluate
			+
			Variable_Target.GroundbaseLevel
			+
			0.125 * Variable_Target.StructureCount {Parameter_Type = "Tax_Agency", Parameter_Only_Consider_Complete = 1.0}
			+
			Variable_Target.FriendlyForce.GroundTotalNBTD
			+
			2.0 * Function_Planet_Has_Capital_Building.Evaluate
			+
			(Function_Open_Ground_Structure_Slots.Evaluate == 1)
			+
			(Variable_Target.MaxGroundbaseLevelUnnormalized > 5)
			+
			Function_Cowardly_Personality.Evaluate
			+
			Function_Isolationist_Personality.Evaluate
			+
			0.5 * Function_Cautious_Personality.Evaluate
		)
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
	</Needs_Ground_Defenses>
	
	
	<Needs_Weapon>
		(Function_Current_Income.Evaluate > 2000)
		*
		(Function_Open_Ground_Structure_Slots.Evaluate > 0)
		*
		(
			Function_Is_Connected_To_Enemy.Evaluate
			+
			4.0 * (Variable_Target.Hints.Chokepoint + Variable_Target.Hints.PriorityTarget)
			+
			Function_GenericPlanetValue.Evaluate
			+
			Variable_Target.StarbaseLevel
			+
			0.125 * Function_Shipyard_Level.Evaluate
			+
			Variable_Target.FriendlyForce.SpaceTotalNBTD
			+
			2.0 * Function_Planet_Has_Capital_Building.Evaluate
			+
			(Function_Open_Ground_Structure_Slots.Evaluate == 1)
			+
			(5 > Variable_Target.MaxGroundbaseLevelUnnormalized)
			+
			Function_Cowardly_Personality.Evaluate
			+
			Function_Isolationist_Personality.Evaluate
			+
			0.5 * Function_Cautious_Personality.Evaluate
		)
		*
		(Variable_Target.HasStructure {Parameter_Type = "Ground_Ion_Cannon", Parameter_Type = "Ground_Hypervelocity_Gun", Parameter_Only_Consider_Complete = 1.0} == 0.0)
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		Function_Planet_Has_Local_Government_Building.Evaluate
		*
		(1.0 - 0.5 * Variable_Target.HasStructure {Parameter_Type = "Generic_Planetary_Shield", Parameter_Only_Consider_Complete = 1.0})		
	</Needs_Weapon>

	
	<Needs_Planetary_Shield>
		Function_Needs_Ground_Defenses.Evaluate
		*
		(Variable_Target.HasStructure {Parameter_Type = "Generic_Planetary_Shield", Parameter_Only_Consider_Complete = 1.0} == 0.0)
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		(1.0 - 0.5 * Variable_Target.HasStructure {Parameter_Type = "Ground_Ion_Cannon", Parameter_Type = "Ground_Hypervelocity_Gun", Parameter_Only_Consider_Complete = 1.0})
	</Needs_Planetary_Shield>

	
	<Needs_Turbolasers>
		Function_Needs_Ground_Defenses.Evaluate
		*
		(Variable_Target.HasStructure {Parameter_Type = "Generic_Galactic_Turbolaser_Tower_Defenses", Parameter_Only_Consider_Complete = 1.0} == 0.0)
		*
		Function_Needs_Build_Slots_Saved_For_Company.Evaluate
		*
		(1.0 - 0.5 * Variable_Target.HasStructure {Parameter_Type = "Generic_Planetary_Shield", Parameter_Only_Consider_Complete = 1.0})
	</Needs_Turbolasers>

	
	<Needs_Space_Defensive_Structure>
		(Variable_Target.StarbaseLevel == Variable_Target.MaxStarbaseLevel) 
		*
		(
			(1.0 + Variable_Target.FriendlyForce.SpaceTotalNBTD) *
			(1.0 + Function_DefensiveValue.Evaluate)
			+
			4.0 * Function_Planet_Has_Capital_Building.Evaluate
			+
			4.0 * Function_Cowardly_Personality.Evaluate
			+
			2.0 * Function_Cautious_Personality.Evaluate
		)
		*
		(1.0 - Variable_Target.HasStructure {Parameter_Type = "Secondary_Golan_One",
											Parameter_Type = "Secondary_Golan_Two",
											Parameter_Type = "Secondary_Golan_Three",
											Parameter_Type = "Valor_Station",
											Parameter_Type = "Brask",
											Parameter_Type = "Visvia",
											Parameter_Type = "Meridian_I",
											Parameter_Type = "Meridian_II",
											Parameter_Type = "Meridian_III",
											Parameter_Type = "Meridian_IV",
											Parameter_Type = "Aphelion",
											Parameter_Only_Consider_Complete = 1.0
											}
		)
	</Needs_Space_Defensive_Structure>
	
	
	<Needs_Special_Shipyard>
		(2 > Variable_Self.StructureCount {Parameter_Type = "CSA_Ship_Market", Parameter_Type = "Pirate_Base", Parameter_Only_Consider_Complete = 1.0})
		*
		(3 > Function_Max_Shipyard_Level.Evaluate)
		*
		(0.1 + 0.9 * (Function_Is_Connected_To_Enemy.Evaluate == 0))
		*
		Variable_Target.StarbaseLevelUnnormalized
		*
		(Variable_Target.EnemyForce.HasSpaceForce == 0)
		*
		(1 - Function_Planet_Has_Rancor_Base.Evaluate)
	</Needs_Special_Shipyard>

	
</Equations>

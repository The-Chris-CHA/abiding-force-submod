<?xml version="1.0" ?>

<Equations>

	<Allowed_As_Defender_Land>
		(Game.IsCampaignGame == 0)
		+
		(Game.IsCampaignGame == 1)	
		*
		(
			(1 - Variable_Self.IsDefender)
			+
			Variable_Self.IsDefender * Function_Aggressive_Personality.Evaluate * (Game.Age > 60 # 120)
			+
			(Variable_Self.IsDefender) * (Variable_Self.BaseLevel == 0)
			+
			(Variable_Self.IsDefender) * (Variable_Self.BaseLevel > 0)
			*
			(
				(
					(Variable_Self.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Infantry | Vehicle | Air]} 
					>= 0.5 * Variable_Enemy.LandedForceUnnormalized)
				)
				> 0
			)
			*
			(Game.Age > 120 # 240)
			+
			Variable_Self.IsFaction {Parameter_Faction = "Hostile", Parameter_Faction = "Warlords", Parameter_Faction = "Independent_Forces"}
		)
	</Allowed_As_Defender_Land>

	
	<Should_Destroy_Land_Unit>
		Function_Allowed_As_Defender_Land.Evaluate
		*
		(
			4.0 * ((Variable_Target.Location.FriendlyForce - Variable_Target.Location.EnemyForce) > 0.0)
			+
			3.0 * (1.0 - Variable_Target.Location.EnemyForce)
			+
			2.0 * (0.3 > Variable_Target.Shield)
			+
			2.0 * (1.0 - Variable_Target.Health)
			+
			5.0 * (0.25 > Variable_Target.Health)
			+ 
			(1.0 - Variable_Target.ForceNBTD)
			+
			2.0 * Variable_Target.ContainsHero
			+
			1.0
			-
			Variable_Target.Location.IsEnemyStartLocation
		)
	</Should_Destroy_Land_Unit>

	
	<Should_Clear_Infantry>
		Function_Allowed_As_Defender_Land.Evaluate
		*
		10.0
		*
		(Variable_Target.EnemyUnitConcentrationNBTD {Parameter_Category = GameObjectCategoryType[Infantry]} -
		Function_Should_Clear_Vehicles.Evaluate)
		*
		(1.0 - Variable_Target.IsEnemyStartLocation * (1.0 - Function_Aggressive_Personality.Evaluate))
	</Should_Clear_Infantry>

	
	<Should_Clear_Vehicles>
		Function_Allowed_As_Defender_Land.Evaluate
		*
		10.0
 		*
		Variable_Target.EnemyUnitConcentrationNBTD {Parameter_Category = GameObjectCategoryType[Vehicle]}
		*
		(1.0 - Variable_Target.IsEnemyStartLocation * (1.0 - Function_Aggressive_Personality.Evaluate))
	</Should_Clear_Vehicles>

    
    <Disable_VictoryPoint>
		Variable_Enemy.HasUnit {
							Parameter_Type = "Generic_Planetary_Shield",
							Parameter_Type = "Remnant_Capital",
							Parameter_Type = "PA_Capital",
							Parameter_Type = "Maldrood_Capital",
							Parameter_Type = "Eriadu_Capital",
							Parameter_Type = "NewRep_Senate",
							Parameter_Type = "Rancor_Base",
							Parameter_Type = "CSA_Capital",
							Parameter_Type = "U_Ground_Palace",
							Parameter_Type = "Hapan_Palace",
							Parameter_Type = "Mando_Capital"}
	</Disable_VictoryPoint>
    

	<Disable_Bombardment>
		Variable_Enemy.HasUnit {
							Parameter_Type = "Ground_Ion_Cannon", 
							Parameter_Type = "Ground_Hypervelocity_Gun",
							Parameter_Type = "Generic_Planetary_Shield",
							Parameter_Type = "Remnant_Capital",
							Parameter_Type = "PA_Capital",
							Parameter_Type = "Maldrood_Capital",
							Parameter_Type = "Eriadu_Capital",
							Parameter_Type = "NewRep_Senate",
							Parameter_Type = "Rancor_Base",
							Parameter_Type = "CSA_Capital",
							Parameter_Type = "U_Ground_Palace",
							Parameter_Type = "Hapan_Palace",
							Parameter_Type = "Mando_Capital"}
	</Disable_Bombardment>
	
	
	<Should_Destroy_Structure>
		Function_Allowed_As_Defender_Land.Evaluate
		*
		(1 - Variable_Target.Owner.IsFaction {Parameter_Faction = "Neutral"})
		*
		(
			0.001
			+
			Variable_Target.Type.IsType {Parameter_Type = "Empire_Anti_Infantry_Turret",
										Parameter_Type = "Rebel_Anti_Infantry_Turret",
										Parameter_Type = "Empire_Anti_Aircraft_Turret",
										Parameter_Type = "Rebel_Anti_Aircraft_Turret",
										Parameter_Type = "Empire_Anti_Vehicle_Turret",
										Parameter_Type = "Rebel_Anti_Vehicle_Turret",
										Parameter_Type = "Buildable_Bacta_Tank",
										Parameter_Type = "Buildable_Repair_Facility"}								
			+									
			Function_Priority_Structures.Evaluate
			+
			(20 * Variable_Target.Type.IsType { Parameter_Type = "Mineral_Processor"
												,Parameter_Type = "Skirmish_Ground_Mining_Facility"
												,Parameter_Type = "GroundWar_Reinforcement_Point_Defensive_Upgrade"
												,Parameter_Type = "GroundWar_Reinforcement_Point_Economic_Upgrade"
												,Parameter_Type = "GroundWar_Reinforcement_Point"})
			+
			(15.0 * (1 - Variable_Target.Location.EnemyForce))
		)
		*
		(1 - (Variable_Target.Type.IsType {Parameter_Type = "Generic_Ground_Turbolaser_Tower"}))
		*
		(1.0 - Function_May_Lose_Land_Control_Game.Evaluate)
		*
		(1.0 - Variable_Target.IsContestable)
	</Should_Destroy_Structure>

	
	<Should_Destroy_Turbolaser>
		Function_Allowed_As_Defender_Land.Evaluate
		*
		(1 - Variable_Target.Location.EnemyForce)
		*
		(Variable_Target.Type.IsType {	Parameter_Type = "Generic_Ground_Turbolaser_Tower"})
		*
		(10 - 5 * Function_Cautious_Personality.Evaluate)
		*
		(1.0 - Function_May_Lose_Land_Control_Game.Evaluate)
	</Should_Destroy_Turbolaser>
	

	<Want_To_Retreat_From_Land>
		50.0
		*
		(Game.Age > 45)
		*
		(
			(
				(1.0 - Variable_Self.IsDefender) 
				* 
				(
					(
						(Function_Cautious_Personality.Evaluate + Function_Cowardly_Personality.Evaluate) * Variable_Enemy.ForceUnnormalized{Parameter_Attenuator = 1.0} 
						> (Variable_Self.LandedForceUnnormalized{Parameter_Attenuator = 1.0} + Variable_Self.ReinforcementsUnnormalized {Parameter_Attenuator = 1.0})
					)
					+
					(
						Variable_Enemy.ForceUnnormalized{Parameter_Attenuator = 1.0} 
						>= (1.25 * (Variable_Self.LandedForceUnnormalized{Parameter_Attenuator = 1.0} + Variable_Self.ReinforcementsUnnormalized {Parameter_Attenuator = 1.0}))
					)
					+
					(Variable_Self.ReinforcementsUnnormalized == 0.0) * (500 > Variable_Self.FriendlyForceUnnormalized)
				)
				*
				Variable_Self.HasUnit {
										Parameter_Type = "Reinforcement_Point", 
										Parameter_Type = "Reinforcement_Point_Plus1_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus2_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus3_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus4_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus5_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus6_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus7_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus8_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus10_Cap", 
										Parameter_Type = "Victory_Point"
										}
			)
			+
			(
				Variable_Self.IsDefender
				*
				(Variable_Enemy.FriendlyForceUnnormalized{Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air|LandHero]} >= (4.0 * Variable_Self.FriendlyForceUnnormalized{Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air|LandHero]})) 
				*
				(1.0 - Script_EvaluateInGalacticContext.Evaluate{Parameter_Script_String = "GenericPlanetValue"})
				*
				(
					(400.0 > Variable_Self.FriendlyForceUnnormalized{Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air|LandHero]}) 
					*
					(1.0 - Function_Have_Structure_With_Garrison.Evaluate)
					+
					(Variable_Self.BaseLevel == 0)
					+
					Variable_Self.HasUnit {
										Parameter_Type = "Reinforcement_Point", 
										Parameter_Type = "Reinforcement_Point_Plus1_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus2_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus3_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus4_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus5_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus6_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus7_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus8_Cap", 
										Parameter_Type = "Reinforcement_Point_Plus10_Cap", 
										Parameter_Type = "Victory_Point"
										}
					*
					(5 >= Variable_Self.UnitSpaceAvailable)
					*
					(0.2 + 0.8 * Variable_Self.HasUnit {Parameter_Type = "Ground_Ion_Cannon", Parameter_Type = "Ground_Hypervelocity_Gun"})
				)
			)
		)
	</Want_To_Retreat_From_Land>


	<Allowed_To_Retreat_From_Land>
		Game.IsCampaignGame
		*
		Variable_Self.CanRetreat
		*
		(1.0 - Variable_Self.IsFaction {Parameter_Faction = "Hostile"})
	</Allowed_To_Retreat_From_Land>

	
	<Should_Retreat_From_Land>
		Function_Want_To_Retreat_From_Land.Evaluate
		*
		Function_Allowed_To_Retreat_From_Land.Evaluate
	</Should_Retreat_From_Land>

	
	<Game_Age>
		Game.Age
	</Game_Age>

	
	<Priority_Structures>
		(
			10.0 
			* 
			Variable_Target.Type.IsType {Parameter_Type = "Generic_Power_Generator"}
			*
			Variable_Enemy.HasUnit { Parameter_Type = "Generic_Planetary_Shield",
								Parameter_Type = "Generic_Ground_Turbolaser_Tower",
								Parameter_Type = "Generic_Ground_Base_Shield",
								Parameter_Type = "Generic_Ground_Umbrella_Shield"}
		)
		+
		(5.0 * Variable_Target.Type.IsType {Parameter_Type = "Ground_Ion_Cannon",
										Parameter_Type = "Ground_Hypervelocity_Gun"})
		+
		(15.0 * Variable_Target.Type.IsType {Parameter_Type = "Empire_MoffPalace", 
											Parameter_Type = "Maldrood_MoffPalace",
											Parameter_Type = "Zsinj_MoffPalace",
											Parameter_Type = "Eriadu_MoffPalace",
											Parameter_Type = "Pentastar_MoffPalace",
											Parameter_Type = "Hand_GovernorOffice",
											Parameter_Type = "NewRep_SenatorsOffice",
											Parameter_Type = "CSA_LocalOffice",
											Parameter_Type = "House_Royal",
											Parameter_Type = "Mando_Palace"})
		+
		(20.0 * Variable_Target.Type.IsType {Parameter_Type = "Remnant_Capital",
											Parameter_Type = "PA_Capital",
											Parameter_Type = "Maldrood_Capital",
											Parameter_Type = "Eriadu_Capital",
											Parameter_Type = "NewRep_Senate",
											Parameter_Type = "Rancor_Base",
											Parameter_Type = "CSA_Capital",
											Parameter_Type = "U_Ground_Palace",
											Parameter_Type = "Hapan_Palace",
											Parameter_Type = "Mando_Capital"})
		+
		(Game.IsCampaignGame == 1)	
		*
		(5 * Variable_Target.Type.IsType { 	Parameter_Type = "Generic_Ground_Base_Shield",
											Parameter_Type = "Generic_Ground_Umbrella_Shield"})
		+
		(5 * Variable_Target.Type.IsType { Parameter_Type = "Generic_Planetary_Shield"})	
	</Priority_Structures>

	
	<Have_Structure_With_Garrison>
		(
		Variable_Self.HasUnit {Parameter_Type = "E_Ground_Barracks",
								Parameter_Type = "A_Ground_Barracks",
								Parameter_Type = "T_Ground_Barracks",
								Parameter_Type = "Z_Ground_Barracks",
								Parameter_Type = "R_Ground_Barracks",
								Parameter_Type = "P_Ground_Barracks",
								Parameter_Type = "C_Ground_Barracks",
								Parameter_Type = "U_Ground_Barracks",
								Parameter_Type = "HC_Ground_Barracks",
								Parameter_Type = "M_Ground_Barracks"}
		+
		Variable_Self.HasUnit {Parameter_Type = "E_Ground_Light_Vehicle_Factory",
								Parameter_Type = "A_Ground_Light_Vehicle_Factory",
								Parameter_Type = "T_Ground_Light_Vehicle_Factory",
								Parameter_Type = "Z_Ground_Light_Vehicle_Factory",
								Parameter_Type = "R_Ground_Light_Vehicle_Factory",
								Parameter_Type = "C_Ground_Light_Vehicle_Factory",
								Parameter_Type = "P_Ground_Light_Vehicle_Factory",
								Parameter_Type = "U_Ground_Vehicle_Factory",
								Parameter_Type = "HC_Ground_Light_Vehicle_Factory",
								Parameter_Type = "M_Ground_Light_Vehicle_Factory"}
		+
		Variable_Self.HasUnit {Parameter_Type = "E_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "A_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "T_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "Z_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "R_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "P_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "C_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "U_Ground_Droid_Works",
								Parameter_Type = "HC_Ground_Heavy_Vehicle_Factory",
								Parameter_Type = "M_Ground_Heavy_Vehicle_Factory"}
		+
		Variable_Self.HasUnit {Parameter_Type = "E_Ground_Advanced_Vehicle_Factory",
								Parameter_Type = "A_Ground_Advanced_Vehicle_Factory",
								Parameter_Type = "T_Ground_Advanced_Vehicle_Factory",
								Parameter_Type = "Z_Ground_Advanced_Vehicle_Factory",
								Parameter_Type = "P_Ground_Advanced_Vehicle_Factory"}
		+
		Variable_Self.HasUnit {Parameter_Type = "Empire_MoffPalace", 
								Parameter_Type = "Maldrood_MoffPalace",
								Parameter_Type = "Zsinj_MoffPalace",
								Parameter_Type = "Eriadu_MoffPalace",
								Parameter_Type = "Pentastar_MoffPalace",
								Parameter_Type = "Hand_GovernorOffice",
								Parameter_Type = "NewRep_SenatorsOffice",
								Parameter_Type = "CSA_LocalOffice",
								Parameter_Type = "House_Royal",
								Parameter_Type = "Mando_Palace"}
		+
		Variable_Self.HasUnit{Parameter_Type = "Remnant_Capital",
								Parameter_Type = "PA_Capital",
								Parameter_Type = "Maldrood_Capital",
								Parameter_Type = "Eriadu_Capital",
								Parameter_Type = "NewRep_Senate",
								Parameter_Type = "Rancor_Base",
								Parameter_Type = "CSA_Capital",
								Parameter_Type = "U_Ground_Palace",
								Parameter_Type = "Hapan_Palace",
								Parameter_Type = "Mando_Capital"}
		) > 0
	</Have_Structure_With_Garrison>


	<Should_Bomb>
		(1 - Variable_Self.IsDifficulty{Parameter_Difficulty_Level_Type = DifficultyLevelType[Easy]}) 
		*
		50.0 
		*
		Variable_Self.IsBombingRunAvailable 
		*
		(Variable_Target.ForceUnnormalized {Parameter_Category = GameObjectCategoryType[AntiAir]} == 0.0) 
		*
		(1.0 - (Variable_Target.Location.EnemyForceUnnormalized {Parameter_Category = GameObjectCategoryType[AntiAir]} > 100.0)) 
		*
		(1.0 - (Variable_Self.EnemyForceUnnormalized {Parameter_Category = GameObjectCategoryType[AntiAir]} > 3000.0)) 
		*
		(1.0 + Variable_Target.Location.EnemyUnitConcentration)
		*
		Variable_Target.IsValidBombingTarget
		*
		(1.0 - Variable_Target.IsContestable)
		*
		(
			1.0 
			+
			Function_Priority_Structures.Evaluate
		)
	</Should_Bomb>
	
	
	<Need_Units_Landed>
		25.0
	</Need_Units_Landed>	

	
	<Is_Friendly_Start>
		Variable_Target.IsFriendlyStartLocation
	</Is_Friendly_Start>


	<Need_Field_Base>
		Variable_Target.Type.IsType {Parameter_Type = "Field_Base_Pad"}
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
	</Need_Field_Base>
	
	
	<Need_AntiVehicle_Turret>
		Variable_Target.Type.IsType {Parameter_Type = "Skirmish_Build_Pad"
										,Parameter_Type = "Rebel_Build_Pad" 
										,Parameter_Type = "Empire_Build_Pad"
										,Parameter_Type = "Base_Buildable_Turret_Pad"
										,Parameter_Type = "Rebel_Build_Pad_Offensive"
										,Parameter_Type = "Empire_Build_Pad_Offensive"}
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
		*
		20
		*
		(1 - Function_Is_Saving_For_Refineries_Land.Evaluate)
		*
		(
			(1 - Function_Skirmish_Upgrade_Tech.Evaluate)
			+
			(Variable_Target.Location.EnemyForce {Parameter_Category = GameObjectCategoryType[Vehicle]} > 0)
		)
		*
		(0.5 + (Variable_Enemy.LandedForceUnnormalized {Parameter_Category = GameObjectCategoryType[Vehicle]} /
		(Variable_Enemy.LandedForceUnnormalized + 0.00001)))
		*
		(
			50 * (0 == Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Empire_Anti_Vehicle_Turret",
																	Parameter_Type = "Rebel_Anti_Vehicle_Turret"})
			+
			5 * (0.7 - Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Empire_Anti_Vehicle_Turret",
																	Parameter_Type = "Rebel_Anti_Vehicle_Turret"} / Function_Build_Pad_Count.Evaluate)
			+
			2 * (200 > Variable_Target.DistanceToNearestFriendly {Parameter_Category = GameObjectCategoryType[Structure]})
			+
			5 * Variable_Target.Location.IsInsideFriendlyShield
		)
	</Need_AntiVehicle_Turret>


	<Need_AntiAir_Turret>
		Variable_Target.Type.IsType {Parameter_Type = "Skirmish_Build_Pad"
										,Parameter_Type = "Rebel_Build_Pad" 
										,Parameter_Type = "Empire_Build_Pad"
										,Parameter_Type = "Base_Buildable_Turret_Pad"
										,Parameter_Type = "Rebel_Build_Pad_Offensive"
										,Parameter_Type = "Empire_Build_Pad_Offensive"}
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
		*
		20
		*
		(1 - Function_Is_Saving_For_Refineries_Land.Evaluate)
		*
		(1 - Function_Skirmish_Upgrade_Tech.Evaluate)
		*
		(0.25 * Variable_Self.IsDefender + (Variable_Enemy.LandedForceUnnormalized {Parameter_Category = GameObjectCategoryType[Air]} /
		(Variable_Enemy.LandedForceUnnormalized + 0.00001)))
		*
		(
			10 * (0 == Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Empire_Anti_Aircraft_Turret",
																	Parameter_Type = "Rebel_Anti_Aircraft_Turret"})
			+
			5 * (0.3 - Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Empire_Anti_Aircraft_Turret",
																	Parameter_Type = "Rebel_Anti_Aircraft_Turret"} / Function_Build_Pad_Count.Evaluate)
			+
			2 * (200 > Variable_Target.DistanceToNearestFriendly {Parameter_Category = GameObjectCategoryType[Structure]})
			+
			5 * Variable_Target.IsInsideFriendlyShield
		)
	</Need_AntiAir_Turret>


	<Need_AntiInfantry_Turret>
		Variable_Target.Type.IsType {Parameter_Type = "Skirmish_Build_Pad"
												,Parameter_Type = "Rebel_Build_Pad"
												,Parameter_Type = "Empire_Build_Pad"
												,Parameter_Type = "Base_Buildable_Turret_Pad"
												,Parameter_Type = "Rebel_Build_Pad_Offensive"
												,Parameter_Type = "Empire_Build_Pad_Offensive"		}
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
		*
		10
		*
		(
			(1 - Function_Is_Saving_For_Refineries_Land.Evaluate)
			+
			(Function_Is_Saving_For_Refineries_Land.Evaluate)
			* 
			(300 > Variable_Target.DistanceToNearestEnemy {Parameter_Type = "Skirmish_Mineral_Processor_Pad"
																			,Parameter_Type = "Ground_Mining_Facility_Build_Pad"
																			,Parameter_Type = "Skirmish_Outpost_Pad"
																			,Parameter_Type = "Skirmish_Alternative_Recruitment_Structure"
																			})
		)
		*
		(
			(1 - Function_Skirmish_Upgrade_Tech.Evaluate)
			+
			(Variable_Target.Location.EnemyForce {Parameter_Category = GameObjectCategoryType[Infantry]} > 0)
		)
		*
		(0.5 + (Variable_Enemy.LandedForceUnnormalized {Parameter_Category = GameObjectCategoryType[Infantry]} /
		(Variable_Enemy.LandedForceUnnormalized + 0.00001)))
		*
		(
			10 * (0 == Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Empire_Anti_Infantry_Turret",
																					Parameter_Type = "Rebel_Anti_Infantry_Turret"})
			+
			5 * (0.7 - Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Empire_Anti_Infantry_Turret",
																					Parameter_Type = "Rebel_Anti_Infantry_Turret"}
																					/ Function_Build_Pad_Count.Evaluate)
			+
			2 * (200 > Variable_Target.DistanceToNearestFriendly {Parameter_Category = GameObjectCategoryType[Structure]})
			+
			5 * Variable_Target.IsInsideFriendlyShield
		)
	</Need_AntiInfantry_Turret>


	<Need_Bacta_Tank>
		Variable_Target.Type.IsType {Parameter_Type = "Skirmish_Build_Pad"
												,Parameter_Type = "Rebel_Build_Pad" 
												,Parameter_Type = "Empire_Build_Pad"
												,Parameter_Type = "Base_Buildable_Turret_Pad"
												,Parameter_Type = "Rebel_Build_Pad_Defensive"
												,Parameter_Type = "Empire_Build_Pad_Defensive"}
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
		*
		(1 - Function_Is_Saving_For_Refineries_Land.Evaluate)
		*
		(1 - Function_Skirmish_Upgrade_Tech.Evaluate)
		*
		(Game.Age > 60)
		*
		Variable_Self.FriendlyForce {Parameter_Category = GameObjectCategoryType[Infantry]}
		*
		(
			10 * (0 == Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Buildable_Bacta_Tank"})
			+
			5 * (0.1 - Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Buildable_Bacta_Tank"} / Function_Build_Pad_Count.Evaluate)
			-
			2 * (800 > Variable_Target.DistanceToNearestFriendly {	Parameter_Type = "Buildable_Bacta_Tank"})
			+
			5 * Variable_Target.IsInsideFriendlyShield
		)
	</Need_Bacta_Tank>


	<Need_Repair_Bay>
		Variable_Target.Type.IsType {Parameter_Type = "Skirmish_Build_Pad"
												,Parameter_Type = "Rebel_Build_Pad" 
												,Parameter_Type = "Empire_Build_Pad"
												,Parameter_Type = "Base_Buildable_Turret_Pad"
												,Parameter_Type = "Rebel_Build_Pad_Defensive"
												,Parameter_Type = "Empire_Build_Pad_Defensive"}
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
		*
		(1 - Function_Is_Saving_For_Refineries_Land.Evaluate)
		*
		(1 - Function_Skirmish_Upgrade_Tech.Evaluate)
		*
		(Game.Age > 60)
		*
		Variable_Self.FriendlyForce {Parameter_Category = GameObjectCategoryType[Vehicle]}
		*
		(
			10 * (0 == Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Buildable_Repair_Facility"})
			+
			5 * (0.1 - Variable_Self.TacticalBuiltStructureCount {Parameter_Type = "Buildable_Repair_Facility"} / Function_Build_Pad_Count.Evaluate)
			-
			2 * (800 > Variable_Target.DistanceToNearestFriendly { 	Parameter_Type = "Buildable_Repair_Facility"})
			+
			5 * Variable_Target.IsInsideFriendlyShield
		)
	</Need_Repair_Bay>

	
	<Is_Allowed_To_Build>
		Game.IsCampaignGame
		*
		(
			Variable_Self.IsDefender
			+
			Variable_Target.IsInsideFriendlyShield
			+
			(1 - Variable_Self.IsDefender)
			*
			(
				(Variable_Target.Location.EnemyForce > 0)
				+
				(1000 > Script_GetDistanceToFirstWithProperty.Evaluate {Parameter_Script_String = "IsRushTarget", Parameter_Script_String = "FRIENDLY"})
			)
		)
		+
		Function_Is_Initial_Skirmish_State_Established.Evaluate
		*
		(1.0 - Function_May_Lose_Land_Control_Game.Evaluate)
	</Is_Allowed_To_Build>

	
	<Need_For_Tactical_Funding>
		Game.IsCampaignGame
		*
		(
			Variable_Self.IsDefender
			+
			Variable_Self.IsDefender * (Script_EvaluateInGalacticContext.Evaluate{Parameter_Script_String = "GenericPlanetValue"} > 0.8)
			+
			Variable_Self.IsDefender * Function_Isolationist_Personality.Evaluate
			+
			(
				(Variable_Self.OpenBuildPadCount > Variable_Self.TacticalBuiltStructureCount)
				*
				(
					(Variable_Enemy.FriendlyForceUnnormalized > (Variable_Self.FriendlyForceUnnormalized / 2))
					+
					(Variable_Enemy.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Air]} > 0)
				)
			)
			+
			0.001
		)
	</Need_For_Tactical_Funding>


	<Build_Pad_Count>
		Variable_Self.TacticalBuiltStructureCount + Variable_Self.OpenBuildPadCount
	</Build_Pad_Count>
	
	
	<Near_Friendly_Base_Or_Pad>
		(1000 > Script_GetDistanceToFirstWithProperty.Evaluate {Parameter_Script_String = "InBase", Parameter_Script_String = "FRIENDLY"})
		+
		(500 > Script_GetDistanceToFirstWithProperty.Evaluate {Parameter_Script_String = "IsRushTarget", Parameter_Script_String = "FRIENDLY"})
	</Near_Friendly_Base_Or_Pad>
	
	
	<Need_To_Secure_Contestable_Land>
		(1 - Function_Should_Firesale_Land.Evaluate)
		*
		(
			(1 - Variable_Target.IsBuildPad)
			+ 
			Function_Is_Refinery_Pad.Evaluate
			+
			Function_Is_Outpost_Pad.Evaluate
			+
			Script_TargetHasProperty.Evaluate{Parameter_Script_String = "IsRushTarget"}
		)
		*
		(1 - Variable_Target.Type.IsType {Parameter_Type = "Bunker_Pad"})
		*
		(1 - Variable_Target.Type.IsType {Parameter_Type = "Garrison_Bunker_Capturable"})
		*
		(
			(Game.IsCampaignGame == 0)
			*
			(
				(Function_Want_More_Resource_Structures_Land.Evaluate)
				* 
				(1.0 + 3.0 * (Function_Num_Refineries.Evaluate == 0.0))
				*
				(
					1.5 * Function_Is_Refinery_Pad.Evaluate
					+
					2.0 * Function_Is_Outpost_Pad.Evaluate
					-
					1.5 * Variable_Target.HasBuiltObject
				)
				+
				Function_Is_Initial_Skirmish_State_Established.Evaluate 
				*
				(0.5 - Variable_Target.Location.EnemyForce)							
			)
			+
			(Game.IsCampaignGame == 1)	
			*
			(
				Function_Is_Allowed_To_Build.Evaluate
				*
				Function_Need_For_Tactical_Funding.Evaluate
				+
				Script_TargetHasProperty.Evaluate{Parameter_Script_String = "IsRushTarget"}
				*
				(
					1.0 
					+ 
					Variable_Self.IsDefender * (Script_EvaluateInGalacticContext.Evaluate{Parameter_Script_String = "GenericPlanetValue"} > 0.8)
					+
					Variable_Self.IsDefender * Function_Isolationist_Personality.Evaluate
					+
					(1.0 - Variable_Self.IsDefender) * (1 > Variable_Self.UnitSpaceAvailable)
				)
				+
				Variable_Target.Type.IsType {Parameter_Type = "Victory_Point"}
			)
		)
		*
		Variable_Target.IsContestable
		*
		( 
			5 * (Variable_Target.Location.EnemyForce == 0)
			+
			5 * clamp( (500 / (Variable_Target.DistanceToNearestFriendly + 1)), 0, 1)
			+
			20.0 
			* 
			Variable_Target.Type.IsType {Parameter_Type = "Victory_Point"} 
			* 
			(1.0 - Variable_Enemy.HasUnit { Parameter_Type = "Generic_Planetary_Shield"} 
			)		
			+
			0.1
		)		
		*
		(1.0 - Function_May_Lose_Land_Control_Game.Evaluate)
	</Need_To_Secure_Contestable_Land>

	
	<Need_To_Secure_Build_Pad_Land>
		(1 - Function_Should_Firesale_Land.Evaluate)
		*
		Function_Is_Turret_Build_Pad.Evaluate
		*
		(
			(Game.IsCampaignGame == 0)
			*
			(
				Function_Is_Initial_Skirmish_State_Established.Evaluate 
				*
				(0.5 - Variable_Target.Location.EnemyForce)
				*
				(Variable_Self.CreditsUnnormalized > 1000)
			)
			+
			(Game.IsCampaignGame == 1)	
			*
			(
				Function_Is_Allowed_To_Build.Evaluate
				*
				Function_Need_For_Tactical_Funding.Evaluate
			)
		)
		*
		Variable_Target.IsContestable
		*
		( 
			5 * clamp( (500 / (Variable_Target.DistanceToNearestFriendly + 1)), 0, 1)
			+
			5
		)		
		*
		(1.0 - Function_May_Lose_Land_Control_Game.Evaluate)
	</Need_To_Secure_Build_Pad_Land>

	
	<Number_Resource_Structures_Land>
		Variable_Self.TacticalBuiltStructureCount{Parameter_Type = "Mineral_Processor"
													,Parameter_Type = "Skirmish_Ground_Mining_Facility"
													,Parameter_Type = "GroundWar_Reinforcement_Point_Defensive_Upgrade"
													,Parameter_Type = "GroundWar_Reinforcement_Point_Economic_Upgrade"
													}
	</Number_Resource_Structures_Land>


	<Need_To_Sell>
		(	
			(
				(Variable_Self.OpenBuildPadCount == 0)
				+
				(2000 > Variable_Self.CreditsUnnormalized)
			)
			> 0
		)
		*
		(
			(
				(Function_Need_Repair_Bay.Evaluate > 20)
				+
				(Function_Need_Bacta_Tank.Evaluate > 20)
				+
				(Function_Need_AntiInfantry_Turret.Evaluate > 10)
				+
				(Function_Need_AntiVehicle_Turret.Evaluate > 20)
				+
				(Function_Need_AntiAir_Turret.Evaluate > 20)
			)
			> 0
		)
	</Need_To_Sell>


	<Need_To_Sell_Tactical_Structure>
		Function_Need_To_Sell.Evaluate
		*
		(
			Variable_Target.HasBuiltObject {Parameter_Type = "Empire_Anti_Vehicle_Turret", 
											Parameter_Type = "Rebel_Anti_Vehicle_Turret"}
			*
			(5 > Function_Need_AntiVehicle_Turret.Evaluate)
			+
			Variable_Target.HasBuiltObject {Parameter_Type = "Empire_Anti_Infantry_Turret",
											Parameter_Type = "Rebel_Anti_Infantry_Turret"}
			*
			(5 > Function_Need_AntiInfantry_Turret.Evaluate)
			+
			Variable_Target.HasBuiltObject {Parameter_Type = "Empire_Anti_Aircraft_Turret",
											Parameter_Type = "Rebel_Anti_Aircraft_Turret"}
			*
			(5 > Function_Need_AntiAir_Turret.Evaluate)
			+
			Variable_Target.HasBuiltObject {Parameter_Type = "Buildable_Bacta_Tank"}
			*
			(5 > Function_Need_Bacta_Tank.Evaluate)
			+
			Variable_Target.HasBuiltObject {Parameter_Type = "Buildable_Repair_Facility"}
			*
			(5 > Function_Need_Repair_Bay.Evaluate)
		)
	</Need_To_Sell_Tactical_Structure>


	<Need_To_Defend_Structure>
		(Variable_Self.IsDefender + (Game.IsCampaignGame == 0))
		*
		(
			(
				20 * Variable_Target.HasTakenDamage {Parameter_Time = 5}
				+
				10 * (Variable_Target.Location.EnemyForce)
			)
			*
			(1.0 - Function_May_Lose_Land_Control_Game.Evaluate)
			+
			Function_Cowardly_Personality.Evaluate
			+
			(2 * Variable_Target.Type.IsType { Parameter_Type = "Generic_Planetary_Shield",
										Parameter_Type = "Generic_Power_Generator"})
		)
	</Need_To_Defend_Structure>
 
	
	<Current_Enemy_Location>
		Variable_Target.EnemyUnitConcentration
	</Current_Enemy_Location>

	
	<Current_Friendly_Location>
		Variable_Target.FriendlyUnitConcentration
	</Current_Friendly_Location>


	<Should_Burn_Units_Land>
		(Game.IsCampaignGame == 1)
		*
		(
			Function_Want_To_Retreat_From_Land.Evaluate
			*
			(1 - Function_Allowed_To_Retreat_From_Land.Evaluate)
			+
			(	
				1 - Variable_Self.HasUnit {
											Parameter_Type = "Reinforcement_Point", 
											Parameter_Type = "Reinforcement_Point_Plus1_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus2_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus3_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus4_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus5_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus6_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus7_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus8_Cap", 
											Parameter_Type = "Reinforcement_Point_Plus10_Cap", 
											Parameter_Type = "Victory_Point"
											}
			)
			*
			(1 - Variable_Self.IsFaction {Parameter_Faction = "Hostile"})
			*
			Variable_Self.IsDefender
			*
			(Variable_Self.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Structure]} == 0)
			*
			(400.0 > Variable_Self.FriendlyForceUnnormalized)
			+
			(1 - Variable_Self.IsDefender)
			*
			(Variable_Self.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air]} > (5.0 * Variable_Self.EnemyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air]}))
		)
		+
		(Game.IsCampaignGame == 0)
		*
		(1 > Variable_Self.UnitSpaceAvailable)
		*
		(
			(	
				(Variable_Self.ReinforcementsUnnormalized > (Variable_Self.FriendlyForceUnnormalized{Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air]} * 0.25))
				+
				(Variable_Self.ReinforcementsUnnormalized > Variable_Self.EnemyForceUnnormalized{Parameter_Category = GameObjectCategoryType[Infantry|Vehicle|Air]})
			) 
			> 0
		)
	</Should_Burn_Units_Land>


	<Should_Firesale_Land>
		Function_Want_To_Retreat_From_Land.Evaluate
		*
		(1 - Variable_Self.IsFaction {Parameter_Faction = "Hostile"})
		*
		(Game.IsCampaignGame == 1)
		*
		(Variable_Self.HasUnit {Parameter_Type = "Empire_MoffPalace", 
								Parameter_Type = "Maldrood_MoffPalace",
								Parameter_Type = "Zsinj_MoffPalace",
								Parameter_Type = "Eriadu_MoffPalace",
								Parameter_Type = "Pentastar_MoffPalace",
								Parameter_Type = "Hand_GovernorOffice",
								Parameter_Type = "NewRep_SenatorsOffice",
								Parameter_Type = "CSA_LocalOffice",
								Parameter_Type = "House_Royal",
								Parameter_Type = "Mando_Palace",
								Parameter_Type = "Remnant_Capital",
								Parameter_Type = "PA_Capital",
								Parameter_Type = "Maldrood_Capital",
								Parameter_Type = "Eriadu_Capital",
								Parameter_Type = "NewRep_Senate",
								Parameter_Type = "Rancor_Base",
								Parameter_Type = "CSA_Capital",
								Parameter_Type = "U_Ground_Palace",
								Parameter_Type = "Hapan_Palace",
								Parameter_Type = "Mando_Palace"} == 0)
		*
		(1 - Variable_Self.HasUnit {Parameter_Type = "Ground_Ion_Cannon"})
		*
		Script_EvaluateInGalacticContext.Evaluate{Parameter_Script_String = "Self_Present"}
		*
		Variable_Self.IsDefender
	</Should_Firesale_Land>


	<Need_To_Steal_Vehicle>
		500 
		* 
		(
			Variable_Target.Force{Parameter_Attenuator = 1.0, Parameter_Category = GameObjectCategoryType[Vehicle]}
			-
			Variable_Target.Force{Parameter_Category = GameObjectCategoryType[LandHero]}
		)
	</Need_To_Steal_Vehicle>
	
	
	<Is_Build_Pad>
		Variable_Target.IsBuildPad
	</Is_Build_Pad>
	

	<Is_Turret_Build_Pad>
		Variable_Target.IsBuildPad
		*
		(1.0 - Script_TargetHasProperty.Evaluate{Parameter_Script_String = "IsRushTarget"})
		*
		(1.0 - Function_Is_Refinery_Pad.Evaluate)
		*
		(1.0 - Function_Is_Outpost_Pad.Evaluate)
	</Is_Turret_Build_Pad>


	<Non_Structure_Force_Unnormalized>
		Variable_Self.FriendlyForceUnnormalized - Variable_Self.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Structure]}
	</Non_Structure_Force_Unnormalized>


	<Is_Defender>
		Variable_Self.IsDefender
	</Is_Defender>
	
	
	<Should_Hold_Position>
		20.0
		*
		Game.IsLandControlGame
		+
		5.0
		*
		Game.IsCampaignGame
		*
		Variable_Self.IsDefender
		*
		Variable_Target.AdditionalPopulationCapacity
		*
		(1.0 + 2.0 * Function_Cautious_Personality.Evaluate)
		+
		5.0
		*
		Game.IsCampaignGame
		*
		Variable_Self.IsDefender
		*
		Variable_Target.Type.IsType {Parameter_Type = "Generic_Ground_Base_Shield"
									,Parameter_Type = "Generic_Ground_Umbrella_Shield"}
		+
		5.0
		*
		Game.IsCampaignGame
		*
		Variable_Self.IsDefender
		*
		Variable_Target.Type.IsType {Parameter_Type = "Generic_Power_Generator"}
		+
		20.0
		*
		Game.IsCampaignGame
		*
		Variable_Self.IsDefender
		*
		Variable_Target.Type.IsType {Parameter_Type = "Victory_Point"}
		+
		10.0
		*
		(Game.IsCampaignGame == 0.0)
		*
		Function_Is_Initial_Skirmish_State_Established.Evaluate
		*
		(Function_Num_Refineries.Evaluate > 1)
		*
		(Variable_Target.Location.EnemyForce{Parameter_Category = GameObjectCategoryType[Infantry]} > 0.0)
	</Should_Hold_Position>

	
	<Should_Fire_Orbital_Bombardment>
		100.0
		*
		Variable_Self.IsOrbitalBombardmentAvailable
		*
		(1.0 + Variable_Target.Location.EnemyUnitConcentration)
		*
		(1.0 - Variable_Target.IsContestable)
		*
		(
			1.0 
			+
			Function_Priority_Structures.Evaluate
		)
	</Should_Fire_Orbital_Bombardment>

	
	<Should_Deploy_Troop_Transports>
		50.0
		*
		((1.0 - Game.Age / 180.0) + (Game.IsCampaignGame == 0.0))
		*
		(3 > Variable_Self.UnitSpaceAvailable)
		*
		(Variable_Target.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Infantry]} / 300)
	</Should_Deploy_Troop_Transports>

	
	<Should_Garrison_Transport>
		50.0
		*
		((1.0 - Game.Age / 250.0) + (Game.IsCampaignGame == 0.0))
		*
		((Variable_Self.IsDefender == 0.0) + (Game.IsCampaignGame == 0))
		*
		Variable_Target.Type.IsType {Parameter_Type = "HAV_Juggernaut", 
										Parameter_Type = "Gallofree_HTT_Transport",
										Parameter_Type = "Aratech_Battle_Platform",
										Parameter_Type = "Heavy_Tracker",
										Parameter_Type = "Floating_Fortress",
										Parameter_Type = "LAAT",
										Parameter_Type = "IDT",
										Parameter_Type = "Strikebreaker",
										Parameter_Type = "GX12_Hovervan",
										Parameter_Type = "AA5_Truck",
										Parameter_Type = "PX4",
										Parameter_Type = "Chariot_LAV_Combat",
										Parameter_Type = "A4_Juggernaut",
										Parameter_Type = "A5_Juggernaut",
										Parameter_Type = "A6_Juggernaut",
										Parameter_Type = "AT_TE_Walker"}
	</Should_Garrison_Transport>
	
	
	<Is_Victory_Point>
		Variable_Target.Type.IsType {Parameter_Type = "Victory_Point"}
	</Is_Victory_Point>
	
	
	<Should_Build_Bunker>
		Variable_Target.Type.IsType {Parameter_Type = "Bunker_Pad" }
		*
		(1 - Variable_Target.HasBuiltObject)
		*
		Function_Is_Allowed_To_Build.Evaluate
		*
		15
		*
		(Game.Age > 60)		
		*
		(1.0 + Variable_Self.Force {Parameter_Category = GameObjectCategoryType[Infantry]})
		*
		(Variable_Self.FriendlyForceUnnormalized {Parameter_Category = GameObjectCategoryType[Infantry]} > 800.0)
	</Should_Build_Bunker>


	<Should_Airstrike>
		(
			Function_Should_Destroy_Structure.Evaluate
			+
			Function_Should_Destroy_Land_Unit.Evaluate
		)
		*
		(1.0 - (Variable_Target.Location.EnemyForceUnnormalized {Parameter_Category = GameObjectCategoryType[AntiAir]} > 50.0)) 
	</Should_Airstrike>
	
</Equations>
